"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[977],{3405:function(e,s,t){t.r(s),t.d(s,{ProfileURLMatch:function(){return E},default:function(){return q}});var i=t(8683),r=t(2791),o="ProfileInfo_profileInfo__mTenO",n="ProfileInfo_name__Y+G+R",a="ProfileInfo_description__EVTGP",l="ProfileInfo_userPhoto__dDpIg",c="ProfileInfo_hidden__RplzN",u="ProfileInfo_btn__c+Qwe",d="ProfileInfo_contactsEdit__R2DqX",f="ProfileInfo_statusTitle__zfyRA",h="ProfileInfo_status__pTVxB",x=t(211),p=t(885),j=t(184),m=function(e){var s=e.updateStatus,t=e.status,i=e.isOwner,o=e.isAuth,n=(0,r.useState)(!1),a=(0,p.Z)(n,2),l=a[0],c=a[1],u=(0,r.useState)(t),d=(0,p.Z)(u,2),x=d[0],m=d[1];(0,r.useEffect)((function(){m(t||"")}),[t]);return(0,j.jsx)("div",{className:h,children:l?(0,j.jsx)("div",{children:(0,j.jsx)("input",{onChange:function(e){m(e.currentTarget.value)},autoFocus:!0,onBlur:function(){c(!1),s(x)},value:x})}):(0,j.jsx)("div",{children:(0,j.jsx)("span",{className:f,title:"double click to change",onDoubleClick:function(){o&&i&&c(!0)},children:t||"no Status"})})})},v=t(4353),b=t(2506),g=function(e){var s=e.profile,t=e.saveProfile,r=e.error,o=(0,b.TA)({initialValues:{fullName:s.fullName,lookingForAJob:s.lookingForAJob,lookingForAJobDescription:s.lookingForAJobDescription,aboutMe:s.aboutMe,contacts:s.contacts||""},onSubmit:function(e){t(e)}});return(0,j.jsxs)("form",{onSubmit:o.handleSubmit,children:[(0,j.jsx)("div",{style:{color:"darkorange",fontSize:"20px"},children:r}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("label",{htmlFor:"fullName",children:(0,j.jsx)("b",{children:"fullName: "})}),(0,j.jsx)("input",(0,i.Z)({className:d,type:"text"},o.getFieldProps("fullName")))]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsxs)("label",{htmlFor:"lookingForAJob",children:[" ",(0,j.jsx)("b",{children:"Looking for a job: "})]}),(0,j.jsx)("input",(0,i.Z)({className:d,type:"checkbox",defaultChecked:s.lookingForAJob},o.getFieldProps("lookingForAJob")))]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsxs)("label",{htmlFor:"lookingForAJobDescription",children:[" ",(0,j.jsx)("b",{children:"My professional skills: "})]}),(0,j.jsx)("input",(0,i.Z)({className:d,type:"text"},o.getFieldProps("lookingForAJobDescription")))]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("label",{htmlFor:"aboutMe",children:(0,j.jsx)("b",{children:"AboutMe: "})}),(0,j.jsx)("textarea",(0,i.Z)({className:d},o.getFieldProps("aboutMe")))]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("label",{htmlFor:"contacts",children:(0,j.jsx)("b",{children:"Contacts"})}),": ",Object.keys(s.contacts).map((function(e,s){return(0,j.jsx)("div",{children:(0,j.jsxs)("b",{children:[e,": ",(0,j.jsx)("input",(0,i.Z)({className:d,type:"text"},o.getFieldProps("contacts."+e)))]})},s)}))]}),(0,j.jsx)("button",{className:u,type:"submit",children:"Send"})]})},P=t(8687),_=t(81),k=function(e){var s=e.title,t=e.value;return(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:s}),": ",t]})},N=function(e){var s=e.profile,t=e.isOwner,i=e.isAuth,r=e.goToEditMode;return(0,j.jsxs)("div",{className:o,children:[i&&t&&(0,j.jsx)("button",{className:u,onClick:r,children:"Edit profile"}),(0,j.jsx)("div",{className:a,children:(0,j.jsxs)("div",{className:n,children:["  ",s.fullName]})}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("b",{children:"Looking for a job:"}),(0,j.jsx)("div",{children:s.lookingForAJob?"Yes":"No"})]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("b",{children:"My professional skills:"}),(0,j.jsx)("div",{children:s.lookingForAJobDescription})]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("b",{children:"AboutMe:"}),(0,j.jsx)("div",{children:s.aboutMe})]}),(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("b",{children:"Contacts"}),": ",Object.keys(s.contacts).map((function(e){return(0,j.jsx)(k,{title:e,value:s.contacts[e]},e)}))]})]})},A=function(e){var s=e.profile,t=e.status,i=e.updateStatus,n=e.isOwner,d=e.savePhoto,f=e.saveProfile,h=e.error,p=e.editMode,b=e.isAuth,k=(0,P.I0)(),A=(0,r.useRef)(null);if(!s)return(0,j.jsx)(x.Z,{});return(0,j.jsx)("div",{className:o,children:(0,j.jsxs)("div",{className:a,children:[(0,j.jsx)("img",{className:l,src:s.photos.large||v,alt:"photos"}),b&&n&&(0,j.jsxs)("div",{children:[(0,j.jsx)("button",{className:u,onClick:function(){var e;null===(e=A.current)||void 0===e||e.click()},children:"Change avatar"}),(0,j.jsx)("input",{className:c,type:"file",onChange:function(e){var s;null!==(s=e.target.files)&&void 0!==s&&s.length&&d(e.target.files[0])},ref:A,accept:"image/*,.png, .jpg, .gif, .web"})]}),(0,j.jsx)(m,{status:t,updateStatus:i,isOwner:n,isAuth:b}),b&&n&&p&&(0,j.jsx)("button",{className:u,onClick:function(){k((0,_.Mb)(!1)),k((0,_.sT)(""))},children:"Cancel editing"}),b&&n&&p?(0,j.jsx)(g,{profile:s,saveProfile:f,error:h}):(0,j.jsx)(N,{profile:s,goToEditMode:function(){k((0,_.Mb)(!0))},isOwner:n,isAuth:b})]})})},M="MyPosts_postsBlock__Bk92l",y="MyPosts_posts__1pgcs",F="Post_item__T4s02",I="Post_message__p7xhF",S="Post_likes__6wObu",w="Post_btn__2Dw85",C=function(e){var s=e.deletePost,t=e.id,i=e.message,r=e.likes;return(0,j.jsxs)("div",{className:F,children:[(0,j.jsx)("img",{src:"https://shapka-youtube.ru/wp-content/uploads/2021/02/avatarka-dlya-skaypa-dlya-parney.jpg",alt:"MyPost"}),(0,j.jsx)("span",{className:I,children:i}),(0,j.jsx)("button",{className:w,onClick:function(){s(t)},children:"x"}),(0,j.jsxs)("div",{className:S,children:[(0,j.jsx)("span",{children:"Likes: "}),r]}),(0,j.jsx)("hr",{})]})},Z=t(2477),J=(0,P.$j)((function(e){return{postData:e.profilePage.postData,isAuth:e.auth.isAuth}}),{addPost:_.q2,deletePost:_.fR})((function(e){var s=e.postData,t=e.addPost,i=e.deletePost,r=e.isAuth,o=function(e){i(e)},n=s.map((function(e,s){return(0,j.jsx)(C,{id:e.id,message:e.message,deletePost:o,likes:e.likeCount},s)}));return r?(0,j.jsxs)("div",{className:M,children:[(0,j.jsx)("h3",{children:"My posts"}),(0,j.jsxs)("div",{children:[(0,j.jsx)(Z.Z,{callback:function(e){t(e.text)}}),(0,j.jsx)("div",{className:y,children:n})]})]}):(0,j.jsx)("div",{})})),D=t.p+"static/media/noPofile.1e2e3e1f598c7b315153.jpg",O=function(e){var s=e.profile,t=e.updateStatus,i=e.status,r=e.isOwner,o=e.savePhoto,n=e.saveProfile,a=e.error,l=e.editMode,c=e.isAuth;return s?(0,j.jsxs)("div",{children:[(0,j.jsx)(A,{profile:s,status:i,updateStatus:t,isOwner:r,isAuth:c,savePhoto:o,editMode:l,error:a,saveProfile:n}),(0,j.jsx)(J,{})]}):(0,j.jsx)("div",{children:(0,j.jsx)("img",{src:D,alt:"noProfileImg"})})},R=t(6871),T=t(7781),E=function(e){return function(s){var t=(0,R.bS)("/profile/:userId/");return(0,j.jsx)(e,(0,i.Z)((0,i.Z)({},s),{},{match:t}))}};var q=(0,T.qC)((0,P.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,meId:e.auth.userId,error:e.profilePage.error,editMode:e.profilePage.editMode,isAuth:e.auth.isAuth}}),{getProfile:_.Ai,getStatus:_.lR,updateStatus:_.Nf,savePhoto:_.Ju,saveProfile:_.Ii}),E)((function(e){var s=e.profile,t=e.getProfile,i=e.getStatus,o=e.updateStatus,n=e.status,a=e.meId,l=e.match,c=e.savePhoto,u=e.saveProfile,d=e.editMode,f=e.error,h=e.isAuth;return(0,r.useEffect)((function(){var e=l?l.params.userId:a;e&&(t(e),i(e))}),[null===l||void 0===l?void 0:l.params.userId]),(0,j.jsx)(O,{profile:s,status:n,updateStatus:o,isOwner:!(null!==l&&void 0!==l&&l.params.userId),savePhoto:c,editMode:d,error:f,saveProfile:u,isAuth:h})}))},2477:function(e,s,t){t.d(s,{Z:function(){return a}});t(2791);var i=t(2506),r="PostForm_errorMessage__0Y8By",o=t(969),n=t(184),a=function(e){var s=e.callback;return(0,n.jsx)("div",{children:(0,n.jsx)(i.J9,{initialValues:{text:""},validate:function(e){var s={};return e.text||(s.text="Enter your message"),s},onSubmit:function(e,t){s(e),t.resetForm({values:{text:""}})},validationSchema:o.U,children:function(){return(0,n.jsxs)(i.l0,{children:[(0,n.jsxs)("div",{children:["`",(0,n.jsx)(i.gN,{component:"textarea",name:"text",placeholder:"write a message"})]}),(0,n.jsx)("div",{className:r,children:(0,n.jsx)(i.Bc,{name:"text",component:"div"})}),(0,n.jsx)("button",{style:{cursor:"pointer"},type:"submit",children:"Add post"})]})}})})}},969:function(e,s,t){t.d(s,{U:function(){return o},v:function(){return r}});var i=t(132),r=i.Ry().shape({password:i.Z_().min(4,"Must be longer than 8 characters").required("Required")}),o=i.Ry().shape({text:i.Z_().min(2,"Must be longer than 2 characters!").max(50,"Post length no more than 50 characters!").required("Required")})},4353:function(e,s,t){e.exports=t.p+"static/media/user.4ce1ce10ce20ffcefb44.png"}}]);
//# sourceMappingURL=977.55cc74f6.chunk.js.map